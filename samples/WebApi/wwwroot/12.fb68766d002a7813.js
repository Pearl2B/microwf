"use strict";(self.webpackChunkwebclient=self.webpackChunkwebclient||[]).push([[12],{9012:(Me,U,i)=>{i.r(U),i.d(U,{AdminModule:()=>Se});var a=i(6895),c=i(8852),e=i(5062);let k=(()=>{class o extends c.fv{constructor(){super(...arguments),this.claim=o.CLAIM_NAME}}return o.CLAIM_NAME="workflow_admin",o.\u0275fac=function(){let n;return function(s){return(n||(n=e.n5z(o)))(s||o)}}(),o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();var d=i(5699),M=i(9116),E=i(5202),m=i(337),N=i(709),O=i(3882),C=i(655),b=i(5570),u=i(453),W=i(8913),T=i(6513),y=i(5370),q=i(5529),A=i(1177);class L{constructor(n){this.notifier=n}call(n,t){const s=new $(n),l=(0,A.ft)(this.notifier,new A.IY(s));return l&&!s.seenValue?(s.add(l),t.subscribe(s)):s}}class $ extends A.Ds{constructor(n){super(n),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var R=i(13),H=i(4850),Q=i(2198);let I=(()=>{class o{constructor(){this.offset=0,this.debounce=100,this.disabled=!1,this.scrollEnd=new e.vpe,this.scroll$=new q.xQ,this.ngUnsubscribe$=new q.xQ}ngAfterViewInit(){this.scroll$.pipe(function J(o){return n=>n.lift(new L(o))}(this.ngUnsubscribe$),(0,R.b)(this.debounce),(0,H.U)(t=>({y:t.y+this.offset,height:t.height})),(0,Q.h)(()=>!this.disabled),(0,Q.h)(t=>t.y>=t.height)).subscribe(()=>this.scrollEnd.emit())}onScroll(t,s,l){this.scroll$.next({y:t+l,height:s})}ngOnDestroy(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275dir=e.lG2({type:o,selectors:[["","twScroller",""]],hostBindings:function(t,s){1&t&&e.NdJ("scroll",function(r){return s.onScroll(r.target.scrollTop,r.target.scrollHeight,r.target.offsetHeight)})},inputs:{offset:"offset",debounce:"debounce",disabled:"disabled"},outputs:{scrollEnd:"scrollEnd"}}),o})();function B(o,n){if(1&o&&(e.TgZ(0,"span",2)(1,"b"),e._uU(2,"End:"),e.qZA(),e._uU(3),e.ALo(4,"date"),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,1,null==t.workflow?null:t.workflow.completed)," ")}}const G=function(o){return["detail",o]};let P=(()=>{class o{constructor(){this.listItem="list__item"}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["tw-workflow-list-item"]],hostVars:2,hostBindings:function(t,s){2&t&&e.Tol(s.listItem)},inputs:{workflow:"workflow"},decls:19,vars:12,consts:[["routerLinkActive","active",3,"routerLink"],[1,"list__itemDetail"],[1,"list_item--right"],["class","list_item--right",4,"ngIf"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"p")(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"div",1)(5,"p")(6,"b"),e._uU(7,"State:"),e.qZA(),e._uU(8),e.TgZ(9,"span",2)(10,"b"),e._uU(11,"Assignee:"),e.qZA(),e._uU(12),e.qZA()(),e.TgZ(13,"p")(14,"b"),e._uU(15,"Start:"),e.qZA(),e._uU(16),e.ALo(17,"date"),e.YNc(18,B,5,3,"span",3),e.qZA()()()),2&t&&(e.Q6J("routerLink",e.VKq(10,G,null==s.workflow?null:s.workflow.id)),e.xp6(1),e.uIk("title",null==s.workflow?null:s.workflow.description),e.xp6(2),e.AsE("",null==s.workflow?null:s.workflow.title," #",null==s.workflow?null:s.workflow.correlationId,""),e.xp6(5),e.hij(" ",null==s.workflow?null:s.workflow.state," "),e.xp6(4),e.hij(" ",null==s.workflow?null:s.workflow.assignee," "),e.xp6(4),e.hij(" ",e.lcZ(17,8,null==s.workflow?null:s.workflow.started)," "),e.xp6(2),e.Q6J("ngIf",null==s.workflow?null:s.workflow.completed))},dependencies:[a.O5,d.rH,d.Od,a.uU],encapsulation:2}),o})(),D=(()=>{class o{constructor(){this.key=o.KEY,this.type=m.AF,this.title="",this.editors=[{key:"type",type:m.P8,label:"Type",required:!1},{key:"correlationId",type:m.Cz,label:"Correlation Id",required:!1},{key:"assignee",type:m.P8,label:"Assignee",required:!1}]}}return o.KEY="workflowsearchslot",o})();var V=i(5108);let Y=(()=>{class o{constructor(){this.empty={type:null,correlationId:null,assignee:null},this.key=D.KEY,this.searchClicked=new e.vpe,this.resettedClicked=new e.vpe,this.class="workflow__search"}ngOnInit(){void 0===this.viewModel&&(this.viewModel=this.empty)}search(t){this.searchClicked.emit(t)}reset(){this.resettedClicked.emit()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["tw-workflow-search"]],hostVars:2,hostBindings:function(t,s){2&t&&e.Tol(s.class)},inputs:{viewModel:"viewModel"},outputs:{searchClicked:"searchClicked",resettedClicked:"resettedClicked"},decls:1,vars:5,consts:[[3,"showSave","showCancel","saveTitle","key","viewModel","submitted","resetted"]],template:function(t,s){1&t&&(e.TgZ(0,"tw-formdef",0),e.NdJ("submitted",function(r){return s.search(r)})("resetted",function(){return s.reset()}),e.qZA()),2&t&&e.Q6J("showSave",!0)("showCancel",!0)("saveTitle","Apply")("key",s.key)("viewModel",s.viewModel)},dependencies:[V.w],encapsulation:2}),o})();function X(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tw-workflow-search",12),e.NdJ("searchClicked",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.searchClicked(l))})("resettedClicked",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.resettedClicked())}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("viewModel",t.searchModel)}}function z(o,n){1&o&&e._UZ(0,"tw-workflow-list-item",13),2&o&&e.Q6J("workflow",n.$implicit)}const K=function(o){return{"button--secondary":o}};let f=class{constructor(n){this._service=n,this.page=c.vy.create(),this.hasFilter=!1,this.showFilter=!1,this.workflows=[],this.workspace="pane"}ngOnInit(){const n=this.createModel(this.page,this.searchModel);this.loadPage(n)}toggle(){this.showFilter=!this.showFilter}reload(){this.list.rows=[],this.page=c.vy.create(),this.ngOnInit()}loadNextPage(){if(this.page.totalPages-1>this.page.pageIndex){const n=this.createModel(c.vy.createNextPage(this.page.pageIndex),this.searchModel);this.loadPage(n)}}searchClicked(n){this.hasFilter=!0,this.searchModel=n,this.list.rows=[],this.page=c.vy.create();const t=this.createModel(this.page,this.searchModel);this.loadPage(t)}resettedClicked(){this.searchClicked({type:null,correlationId:null,assignee:null}),this.hasFilter=!1}loadPage(n){this.workflows$=this._service.workflows(n).subscribe(t=>{const s=JSON.parse(t.headers.get("X-Pagination"));this.page=c.vy.fromResponse(s),this.list.attachRows(t.body)})}createModel(n,t){return W.w.createWorkflowPagingModel(n,t)}};f.\u0275fac=function(n){return new(n||f)(e.Y36(T.z))},f.\u0275cmp=e.Xpm({type:f,selectors:[["tw-workflow-dashboard"]],viewQuery:function(n,t){if(1&n&&e.Gf(u.ns,5),2&n){let s;e.iGM(s=e.CRH())&&(t.list=s.first)}},hostVars:2,hostBindings:function(n,t){2&n&&e.Tol(t.workspace)},features:[e._Bn([T.z])],decls:16,vars:6,consts:function(){let o;return o=$localize`:␟3c91afaf920d7e230b74f363a47d65f2e97b54f8␟2448409548926769984:Instances`,[["twScroller","",1,"pane__left",3,"offset","scrollEnd"],[3,"rows"],["list",""],o,[1,"button__bar"],["type","button",3,"click"],["name","refresh"],["type","button",3,"ngClass","click"],["name","filter"],[3,"viewModel","searchClicked","resettedClicked",4,"ngIf"],["twTemplate","workflow-item"],[1,"pane__main"],[3,"viewModel","searchClicked","resettedClicked"],[3,"workflow"]]},template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.NdJ("scrollEnd",function(){return t.loadNextPage()}),e.TgZ(1,"tw-list",1,2)(3,"tw-header")(4,"h3"),e.SDv(5,3),e.qZA(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return t.reload()}),e._UZ(8,"tw-icon",6),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return t.toggle()}),e._UZ(10,"tw-icon",8),e._uU(11," Filter "),e.qZA()(),e.YNc(12,X,1,1,"tw-workflow-search",9),e.qZA(),e.YNc(13,z,1,1,"ng-template",10),e.qZA()(),e.TgZ(14,"div",11),e._UZ(15,"router-outlet"),e.qZA()),2&n&&(e.Q6J("offset",50),e.xp6(1),e.Q6J("rows",t.workflows),e.xp6(8),e.Q6J("ngClass",e.VKq(4,K,t.hasFilter)),e.xp6(3),e.Q6J("ngIf",t.showFilter))},dependencies:[a.mk,a.O5,d.lC,y.o,u.ns,u.Gt,u.VC,I,P,Y],encapsulation:2}),f=(0,C.gn)([b.k],f);var j=i(6622);function ee(o,n){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"tw-workflow-list-item",2),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("workflow",t.workflow)}}function te(o,n){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"tw-dot",3),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("dot",t.dot)}}function oe(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"date"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA()()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(e.xi3(3,4,t.created,"MM/dd/yyyy HH:mm:ss")),e.xp6(3),e.Oqu(t.fromState),e.xp6(2),e.Oqu(t.toState),e.xp6(2),e.Oqu(t.userName)}}function ne(o,n){if(1&o&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"History"),e.qZA(),e.TgZ(3,"table")(4,"thead")(5,"tr")(6,"th"),e._uU(7,"Created"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"From"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"To"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"User"),e.qZA()()(),e.TgZ(14,"tbody"),e.YNc(15,oe,10,7,"tr",4),e.qZA()()()),2&o){const t=e.oxw();e.xp6(15),e.Q6J("ngForOf",t.history)}}function se(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA()()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t.content)}}function ie(o,n){if(1&o&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Variables"),e.qZA(),e.TgZ(3,"table")(4,"thead")(5,"tr")(6,"th"),e._uU(7,"Content"),e.qZA()()(),e.TgZ(8,"tbody"),e.YNc(9,se,3,1,"tr",4),e.qZA()()()),2&o){const t=e.oxw();e.xp6(9),e.Q6J("ngForOf",t.variables)}}let p=class{constructor(n,t){this._route=n,this._workflowService=t}ngOnInit(){this.routeParams$=this._route.params.subscribe(n=>{n.id&&this.init(n.id)})}init(n){this.workflow$=this._workflowService.get(Number(n)).subscribe(t=>{this.workflow=t,this.loadDot(this.workflow.type,this.workflow.correlationId),this.loadHistory(this.workflow.id),this.loadVariables(this.workflow.id)})}loadDot(n,t){this.dot$=this._workflowService.dotWithHistory(n,t).subscribe(s=>{this.dot={dot:s}})}loadHistory(n){this.history$=this._workflowService.getHistory(n).subscribe(t=>{this.history=t})}loadVariables(n){this.history$=this._workflowService.getVariables(n).subscribe(t=>{this.variables=t})}};p.\u0275fac=function(n){return new(n||p)(e.Y36(d.gz),e.Y36(T.z))},p.\u0275cmp=e.Xpm({type:p,selectors:[["tw-workflow"]],decls:7,vars:4,consts:[[1,"workflow"],[4,"ngIf"],[3,"workflow"],[3,"dot"],[4,"ngFor","ngForOf"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"h3"),e._uU(2,"Overview"),e.qZA(),e.YNc(3,ee,2,1,"div",1),e.YNc(4,te,2,1,"div",1),e.YNc(5,ne,16,1,"div",1),e.YNc(6,ie,10,1,"div",1),e.qZA()),2&n&&(e.xp6(3),e.Q6J("ngIf",t.workflow),e.xp6(1),e.Q6J("ngIf",t.dot),e.xp6(1),e.Q6J("ngIf",t.history&&t.history.length>0),e.xp6(1),e.Q6J("ngIf",t.variables&&t.variables.length>0))},dependencies:[a.sg,a.O5,j.$,P,a.uU],encapsulation:2}),p=(0,C.gn)([b.k],p);const le=[{path:"workflows",component:f,canActivate:[k],children:[{path:"detail/:id",component:p}]}];let re=(()=>{class o{constructor(t){this._slotRegistry=t,this._slotRegistry.register(new D)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(m.FR))},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[a.ez,d.Bz.forChild(le),m.eO,N.L,M.Q,E.p,O.v]}),o})();var ae=i(3482);function ce(o,n){1&o&&e.Hsn(0,0,["*ngIf","active"])}const ue=["*"];let F=(()=>{class o{constructor(){this.style="tabs__tab",this.active=!1}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["tw-tab"]],hostVars:2,hostBindings:function(t,s){2&t&&e.Tol(s.style)},inputs:{title:"title",active:"active"},ngContentSelectors:ue,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,s){1&t&&(e.F$t(),e.YNc(0,ce,1,0,"ng-content",0)),2&t&&e.Q6J("ngIf",s.active)},dependencies:[a.O5],encapsulation:2}),o})();const de=function(o){return{"tab__title--active":o}};function me(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"li",1),e.NdJ("click",function(){const r=e.CHM(t).$implicit,v=e.oxw();return e.KtG(v.selectTab(r))})("keydown",function(l){const v=e.CHM(t).$implicit,Ue=e.oxw();return e.KtG(Ue.keydownOnTab(l,v))}),e.TgZ(1,"span",2),e._uU(2),e.qZA()()}if(2&o){const t=n.$implicit,s=e.oxw();e.Q6J("ngClass",e.VKq(3,de,t.active)),e.uIk("tabindex",s.getTabIndex(t)),e.xp6(2),e.Oqu(t.title)}}const fe=["*"];let pe=(()=>{class o{constructor(){this.style="tabs"}ngAfterContentInit(){0===this.tabs.filter(s=>s.active).length&&setTimeout(()=>this.selectTab(this.tabs.first))}getTabIndex(t){return t.active?null:0}selectTab(t){this.tabs.toArray().forEach(s=>s.active=!1),t.active=!0}keydownOnTab(t,s){(13===t.keyCode||32===t.keyCode)&&this.selectTab(s)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["tw-tabs"]],contentQueries:function(t,s,l){if(1&t&&e.Suo(l,F,4),2&t){let r;e.iGM(r=e.CRH())&&(s.tabs=r)}},hostVars:2,hostBindings:function(t,s){2&t&&e.Tol(s.style)},ngContentSelectors:fe,decls:3,vars:1,consts:[["class","tabs__tab",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],[1,"tabs__tab",3,"ngClass","click","keydown"],[1,"tab__title"]],template:function(t,s){1&t&&(e.F$t(),e.TgZ(0,"ul"),e.YNc(1,me,3,5,"li",0),e.qZA(),e.Hsn(2)),2&t&&(e.xp6(1),e.Q6J("ngForOf",s.tabs))},dependencies:[a.mk,a.sg],encapsulation:2}),o})();var he=i(6498),x=i(6014),ge=i(6688);function Ce(o){const{subscriber:n,counter:t,period:s}=o;n.next(t),this.schedule({subscriber:n,counter:t+1,period:s},s)}var Z=i(529),be=i(4761),ve=i(7165);let _=(()=>{class o{constructor(t,s,l){this._api=t,this._http=s,this._client=l}snapshot(){return this._http.get("jobqueue/snapshot")}upcommings(t){const s=this._api.createApiUrl("jobqueue/upcommings"),l=(new Z.LE).set("pageIndex",t.pageIndex.toString()).set("pageSize",t.pageSize.toString());return this._client.get(s,{params:l,observe:"response"})}failed(t){const s=this._api.createApiUrl("jobqueue/failed"),l=(new Z.LE).set("pageIndex",t.pageIndex.toString()).set("pageSize",t.pageSize.toString());return this._client.get(s,{params:l,observe:"response"})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(be.s),e.LFG(ve.O),e.LFG(Z.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const ke=function(o){return[".",o]};let S=(()=>{class o{constructor(){this.listItem="list__item"}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["tw-queue-list-item"]],hostVars:2,hostBindings:function(t,s){2&t&&e.Tol(s.listItem)},inputs:{queueItem:"queueItem"},decls:18,vars:12,consts:[["routerLinkActive","active",3,"routerLink"],[1,"list__itemDetail"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"p")(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"div",1)(5,"p")(6,"b"),e._uU(7,"Error:"),e.qZA(),e._uU(8),e.qZA(),e.TgZ(9,"p")(10,"b"),e._uU(11,"Retries:"),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"p")(14,"b"),e._uU(15,"DueDate:"),e.qZA(),e._uU(16),e.ALo(17,"date"),e.qZA()()()),2&t&&(e.Q6J("routerLink",e.VKq(10,ke,null==s.queueItem?null:s.queueItem.id)),e.uIk("title",null==s.queueItem?null:s.queueItem.workflowType),e.xp6(3),e.AsE("",null==s.queueItem?null:s.queueItem.triggerName," #",null==s.queueItem?null:s.queueItem.entityId,""),e.xp6(5),e.hij(" ",null==s.queueItem?null:s.queueItem.error," "),e.xp6(4),e.hij(" ",null==s.queueItem?null:s.queueItem.retries," "),e.xp6(4),e.hij(" ",e.xi3(17,7,null==s.queueItem?null:s.queueItem.dueDate,"MM/dd/yyyy-hh:mm:ss")," "))},dependencies:[d.rH,d.Od,a.uU],encapsulation:2}),o})();function Te(o,n){1&o&&e._UZ(0,"tw-queue-list-item",3),2&o&&e.Q6J("queueItem",n.$implicit)}let h=class{constructor(n){this._service=n,this.snapshotItems=[],this.style="pane"}ngOnInit(){this.intervall$=function _e(o=0,n=x.P){return(!function we(o){return!(0,ge.k)(o)&&o-parseFloat(o)+1>=0}(o)||o<0)&&(o=0),(!n||"function"!=typeof n.schedule)&&(n=x.P),new he.y(t=>(t.add(n.schedule(Ce,o,{subscriber:t,counter:0,period:o})),t))}(5e3).subscribe(()=>{this.loadData()})}loadData(){this.loadSnapshot()}loadSnapshot(){this.snapshotItems$=this._service.snapshot().subscribe(n=>{this.snapshotItems=n})}};function ye(o,n){1&o&&e._UZ(0,"tw-queue-list-item",6),2&o&&e.Q6J("queueItem",n.$implicit)}h.\u0275fac=function(n){return new(n||h)(e.Y36(_))},h.\u0275cmp=e.Xpm({type:h,selectors:[["tw-snapshots"]],hostVars:2,hostBindings:function(n,t){2&n&&e.Tol(t.style)},features:[e._Bn([_])],decls:3,vars:1,consts:[[1,"pane__main"],[3,"rows"],["twTemplate","queueItem-item"],[3,"queueItem"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"tw-list",1),e.YNc(2,Te,1,1,"ng-template",2),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("rows",t.snapshotItems))},dependencies:[u.ns,u.VC,S],encapsulation:2}),h=(0,C.gn)([b.k],h);let g=class{constructor(n){this._service=n,this.upcommingPage=c.vy.create(),this.upcommingItems=[],this.style="pane"}ngOnInit(){this.loadData()}loadNextPage(){this.upcommingPage.totalPages-1>this.upcommingPage.pageIndex&&this.loadUpcommings(c.vy.createNextPage(this.upcommingPage.pageIndex,50))}refresh(){this.upcommingList.rows=[],this.upcommingPage=c.vy.create(),this.ngOnInit()}loadData(){this.loadUpcommings(this.upcommingPage)}loadUpcommings(n){this.upcommingItems$=this._service.upcommings(n).subscribe(t=>{const s=JSON.parse(t.headers.get("X-Pagination"));this.upcommingPage=c.vy.fromResponse(s),this.upcommingList.attachRows(t.body)})}};function Ae(o,n){1&o&&e._UZ(0,"tw-queue-list-item",6),2&o&&e.Q6J("queueItem",n.$implicit)}g.\u0275fac=function(n){return new(n||g)(e.Y36(_))},g.\u0275cmp=e.Xpm({type:g,selectors:[["tw-upcommings"]],viewQuery:function(n,t){if(1&n&&e.Gf(u.ns,5),2&n){let s;e.iGM(s=e.CRH())&&(t.upcommingList=s.first)}},hostVars:2,hostBindings:function(n,t){2&n&&e.Tol(t.style)},features:[e._Bn([_])],decls:7,vars:2,consts:[["twScroller","",1,"pane__main",3,"offset","scrollEnd"],[3,"rows"],[1,"button__bar"],["type","button",3,"click"],["name","refresh"],["twTemplate","upcomming-item"],[3,"queueItem"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.NdJ("scrollEnd",function(){return t.loadNextPage()}),e.TgZ(1,"tw-list",1)(2,"tw-header")(3,"div",2)(4,"button",3),e.NdJ("click",function(){return t.refresh()}),e._UZ(5,"tw-icon",4),e.qZA()()(),e.YNc(6,ye,1,1,"ng-template",5),e.qZA()()),2&n&&(e.Q6J("offset",40),e.xp6(1),e.Q6J("rows",t.upcommingItems))},dependencies:[y.o,u.ns,u.Gt,u.VC,I,S],encapsulation:2}),g=(0,C.gn)([b.k],g);let w=class{constructor(n){this._service=n,this.failedPage=c.vy.create(),this.failedItems=[],this.style="pane"}ngOnInit(){this.loadData()}loadNextPage(){this.failedPage.totalPages-1>this.failedPage.pageIndex&&this.loadFailed(c.vy.createNextPage(this.failedPage.pageIndex,50))}refresh(){this.failedList.rows=[],this.failedPage=c.vy.create(),this.ngOnInit()}loadData(){this.loadFailed(this.failedPage)}loadFailed(n){this.failedItems$=this._service.failed(n).subscribe(t=>{const s=JSON.parse(t.headers.get("X-Pagination"));this.failedPage=c.vy.fromResponse(s),this.failedList.attachRows(t.body)})}};w.\u0275fac=function(n){return new(n||w)(e.Y36(_))},w.\u0275cmp=e.Xpm({type:w,selectors:[["tw-failed"]],viewQuery:function(n,t){if(1&n&&e.Gf(u.ns,5),2&n){let s;e.iGM(s=e.CRH())&&(t.failedList=s.first)}},hostVars:2,hostBindings:function(n,t){2&n&&e.Tol(t.style)},features:[e._Bn([_])],decls:7,vars:2,consts:[["twScroller","",1,"pane__main",3,"offset","scrollEnd"],[3,"rows"],[1,"button__bar"],["type","button",3,"click"],["name","refresh"],["twTemplate","failed-item"],[3,"queueItem"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.NdJ("scrollEnd",function(){return t.loadNextPage()}),e.TgZ(1,"tw-list",1)(2,"tw-header")(3,"div",2)(4,"button",3),e.NdJ("click",function(){return t.refresh()}),e._UZ(5,"tw-icon",4),e.qZA()()(),e.YNc(6,Ae,1,1,"ng-template",5),e.qZA()()),2&n&&(e.Q6J("offset",40),e.xp6(1),e.Q6J("rows",t.failedItems))},dependencies:[y.o,u.ns,u.Gt,u.VC,I,S],encapsulation:2}),w=(0,C.gn)([b.k],w);const Ie=[{path:"queue",component:(()=>{class o{constructor(){this.workspace="pane"}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["tw-queue-dashboard"]],hostVars:2,hostBindings:function(t,s){2&t&&e.Tol(s.workspace)},decls:7,vars:0,consts:function(){let n,t,s;return n=$localize`:␟f8fdc777736a0356a290fff7e0a10b990c65a017␟1128905482898990938:Snapshot`,t=$localize`:␟e85efeb92cc58441f5360ad14eb47fd7d2dc9a73␟597970232571542041:Upcommings`,s=$localize`:␟64b582e0d8e3a28331a14d2a1017fa5d6ffb8d93␟7256395947475975935:Failed`,[["title",n],["title",t],["title",s]]},template:function(t,s){1&t&&(e.TgZ(0,"tw-tabs")(1,"tw-tab",0),e._UZ(2,"tw-snapshots"),e.qZA(),e.TgZ(3,"tw-tab",1),e._UZ(4,"tw-upcommings"),e.qZA(),e.TgZ(5,"tw-tab",2),e._UZ(6,"tw-failed"),e.qZA()())},dependencies:[pe,F,h,g,w],encapsulation:2}),o})(),canActivate:[k]}];let Ze=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[a.ez,d.Bz.forChild(Ie),m.eO,N.L,M.Q,E.p,O.v,ae.I]}),o})(),Se=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[k],imports:[a.ez,re,Ze]}),o})()}}]);